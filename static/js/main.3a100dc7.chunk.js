(this["webpackJsonpdag-3d"]=this["webpackJsonpdag-3d"]||[]).push([[0],{135:function(e,t,n){e.exports=n(319)},139:function(e,t,n){},140:function(e,t,n){},319:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(32),i=n.n(o),c=(n(139),n(140),n(11)),l=n(1),h=n(4),s=n(76);var u=function(e){var t=function(e){var t=Object(c.c)().camera,n=Object(a.useState)({pos:{x:0,y:0,z:5},vel:{x:0,y:0,z:0}}),r=Object(h.a)(n,2),o=r[0],i=r[1],s=Object(a.useCallback)((function(){i((function(t){return{vel:{x:.95*(.004*(e.x-t.pos.x)+t.vel.x),y:.95*(.004*(e.y-t.pos.y)+t.vel.y),z:0},pos:{x:t.pos.x+t.vel.x,y:t.pos.y+t.vel.y,z:t.pos.z+t.vel.z}}}))}),[e]);return Object(c.b)(s),t.lookAt(new l.Vector3(o.pos.x+3*o.vel.x,o.pos.y+3*o.vel.y,-1)),t.position.set(o.pos.x,o.pos.y,o.pos.z),[o.pos.x,o.pos.y,o.pos.z]}(e.targetPosition);return r.a.createElement("camera",{attach:"camera",position:t})},m=n(55),d={generateTopUV:function(e,t,n,a,r){var o=function(e){return(e/Math.abs(e)+1)/2},i=o(t[3*n]),c=o(t[3*n+1]),h=o(t[3*a]),s=o(t[3*a+1]),u=o(t[3*r]),m=o(t[3*r+1]);return[new l.Vector2(i,c),new l.Vector2(h,s),new l.Vector2(u,m)]},generateSideWallUV:function(e,t,n,a,r,o){var i=t[3*n],c=t[3*n+1],h=t[3*n+2],s=t[3*a],u=t[3*a+1],m=t[3*a+2],d=t[3*r],f=t[3*r+1],g=t[3*r+2],p=t[3*o],b=t[3*o+1],w=t[3*o+2];return Math.abs(c-u)<.01?[new l.Vector2(i,1-h),new l.Vector2(s,1-m),new l.Vector2(d,1-g),new l.Vector2(p,1-w)]:[new l.Vector2(c,1-h),new l.Vector2(u,1-m),new l.Vector2(f,1-g),new l.Vector2(b,1-w)]}},f=Object(a.forwardRef)((function(e,t){var n=e.width,o=e.height,i=e.text,c=e.backgroundColor,h=e.color,s=e.depth,u=e.onClick,f=e.position,g=Object(m.a)(e,["width","height","text","backgroundColor","color","depth","onClick","position"]),p=n||1,b=o||.3,w=i||"<null>",v=Object(a.useMemo)((function(){var e=new l.Shape;return e.moveTo(p/2*-1,b/2*-1),e.lineTo(p/2,b/2*-1),e.lineTo(p/2,b/2),e.lineTo(p/2*-1,b/2),e.lineTo(p/2*-1,b/2*-1),e}),[p,b]),y={steps:2,depth:s,bevelEnabled:!0,bevelThickness:.03,bevelSize:.04,bevelOffset:0,bevelSegments:5,UVGenerator:d},x=Object(a.useMemo)((function(){var e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return null;var n=20*p,a=20*b;e.style.position="absolute",e.style.top="calc(50% - ".concat(a/2,"px)"),e.style.width=n+"px",e.style.height=a+"px",e.width=20*n,e.height=20*a,t.scale(20,20),t.fillStyle=c||"grey",t.fillRect(0,0,n,a);var r=a/1.8;t.font="bold ".concat(r,"px Arial, sans-serif"),t.fillStyle=h||"white",t.textAlign="center",t.textBaseline="middle";var o=n/2,i=a/2;return t.fillText(w,o,i),e}),[p,b,h,c,w]),E=Object(a.useCallback)((function(e){u({text:i})}),[i,u]);return r.a.createElement("mesh",Object.assign({ref:t,onClick:E,position:[f[0],f[1],f[2]-s/2]},g),r.a.createElement("boxBufferGeometry",{args:[p,b,s||.06],attach:"geometry"}),r.a.createElement("extrudeGeometry",{attach:"geometry",args:[v,y]}),r.a.createElement("meshStandardMaterial",{roughness:.2,metalness:.6,attachArray:"material"},r.a.createElement("canvasTexture",{attach:"map",image:x})),r.a.createElement("meshStandardMaterial",{roughness:.2,metalness:.8,attachArray:"material",color:c}))}));f.defaultProps={depth:.04};var g=function(e){var t=e.spinX,n=e.spinY,o=Object(m.a)(e,["spinX","spinY"]),i=Object(a.useRef)(null);return Object(c.b)((function(e){var a=e.clock,r=i.current;r&&r.rotation.set(a.getElapsedTime()*(t||0),a.getElapsedTime()*(n||0),0)})),r.a.createElement(f,Object.assign({ref:i},o))};function p(e,t){var n,r=Object(a.useState)(0),o=Object(h.a)(r,2),i=o[0],l=o[1];return Object(c.b)((function(e){var t=e.clock;return l(100*t.getElapsedTime()%1e3/1e3)})),(n=e,Object(a.useMemo)((function(){for(var e=[],t=0;t<n;t++)e.push(t);return e}),[n])).map((function(n){return t.getPointAt(1e3*(n/e+i)%1e3/1e3)}))}var b=function(e){var t=e.path,n=e.points;return r.a.createElement(r.a.Fragment,null,p(n,t).map((function(e,t){return r.a.createElement("mesh",{key:t,position:e},r.a.createElement("sphereGeometry",{attach:"geometry",args:[.06]}),r.a.createElement("meshPhongMaterial",{attach:"material",color:"#4070f0"}))})))},w=function(e){var t=e.graph,n=Object(c.c)().viewport,o=Object(a.useCallback)((function(e){return(e-t.width[0])*n.width/(t.width[1]-t.width[0])-n.width/2}),[n,t]),i=Object(a.useCallback)((function(e){return(e-t.height[0])*n.height/(t.height[1]-t.height[0])-n.height/2}),[t,n]),s=Object(a.useCallback)((function(e){return e*n.width/(t.width[1]-t.width[0])}),[n,t]),m=Object(a.useCallback)((function(e){return e*n.height/(t.height[1]-t.height[0])}),[n,t]),d=Object(a.useState)(0),f=Object(h.a)(d,2),p=f[0],w=f[1],v=Object(a.useMemo)((function(){return t.nodes.map((function(e){return new l.Vector3(o(e.x),i(e.y),-.1)}))}),[t,o,i]),y=Object(a.useCallback)((function(e){var n=e.text,a=t.nodes.findIndex((function(e){return e.name===n}));a>=0&&w(a)}),[t,w]),x=function(e,t,n){return Object(a.useMemo)((function(){return e.map((function(e){return new l.CatmullRomCurve3(e.points.map((function(e){return new l.Vector3(t(e.x),n(e.y),-.1)})),!1,"catmullrom")}))}),[e,t,n])}(t.edges,o,i);return r.a.createElement(r.a.Fragment,null,r.a.createElement(u,{targetPosition:v[p]}),t.nodes.map((function(e,t){return r.a.createElement(g,{key:e.name,onClick:y,text:e.name,color:t===p?"black":"white",width:s(e.width),height:m(e.height),backgroundColor:"#4070f0",depth:.2,position:[o(e.x),i(e.y),-.1]})})),x.map((function(e,t){return r.a.createElement("mesh",{key:"mesh"+t},r.a.createElement("tubeGeometry",{attach:"geometry",args:[e,30,.03,8,!1]}),r.a.createElement("meshPhongMaterial",{attach:"material",color:"#333"}))})),x.map((function(e,t){return r.a.createElement(b,{path:e,points:8})})))},v=function(){var e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LR";return Object(a.useMemo)((function(){var a=new s.graphlib.Graph({directed:!0});a.setGraph({rankdir:n,edgesep:2,marginx:20,marginy:20}),a.setDefaultEdgeLabel((function(){return{}}));var r=!0,o=!1,i=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var h=c.value;a.setNode(h.name,{label:h.name,width:h.width,height:h.height})}}catch(y){o=!0,i=y}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}var u=!0,m=!1,d=void 0;try{for(var f,g=t[Symbol.iterator]();!(u=(f=g.next()).done);u=!0){var p=f.value;a.setEdge(p.from,p.to,{minlen:1})}}catch(y){m=!0,d=y}finally{try{u||null==g.return||g.return()}finally{if(m)throw d}}Object(s.layout)(a);var b=a.nodes().map((function(e){return{name:e,width:a.node(e).width,height:a.node(e).height,x:a.node(e).x,y:a.node(e).y}})),w=b.reduce((function(e,t){return[Math.min(t.x,e[0]),Math.max(t.x+t.width,e[1])]}),[0,0]),v=b.reduce((function(e,t){return[Math.min(t.y,e[0]),Math.max(t.y+t.height,e[1])]}),[0,0]);return{nodes:b,width:w,height:v,edges:a.edges().map((function(e){return{points:a.edge(e).points}}))}}),[e,t,n])}([{name:"Config",width:60,height:8},{name:"Ref Data Svc",width:60,height:8},{name:"EOD Prices",width:60,height:8},{name:"MD Sys",width:60,height:8},{name:"Client",width:60,height:8},{name:"Client Int",width:60,height:8},{name:"VWAP Engine",width:60,height:8},{name:"OMS",width:60,height:8},{name:"Exch Links",width:60,height:8},{name:"Trading Sys",width:60,height:8}],[{from:"Config",to:"VWAP Engine"},{from:"Client",to:"Client Int"},{from:"Client Int",to:"OMS"},{from:"Ref Data Svc",to:"VWAP Engine"},{from:"MD Sys",to:"VWAP Engine"},{from:"EOD Prices",to:"VWAP Engine"},{from:"VWAP Engine",to:"OMS"},{from:"OMS",to:"Exch Links"},{from:"Exch Links",to:"Trading Sys"},{from:"Trading Sys",to:"Client Int"}],"RL");return r.a.createElement(c.a,{pixelRatio:window.devicePixelRatio},r.a.createElement("ambientLight",null),r.a.createElement("spotLight",{position:[-7,1,3],color:new l.Color("#fff"),intensity:.8,rotation:[-.2,1.2,0]}),r.a.createElement("spotLight",{position:[0,-5,3],color:new l.Color("#fff"),intensity:.8,rotation:[1.2,0,0]}),r.a.createElement(w,{graph:e}))},y=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},"DAG 3D Component"),r.a.createElement(v,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[135,1,2]]]);
//# sourceMappingURL=main.3a100dc7.chunk.js.map